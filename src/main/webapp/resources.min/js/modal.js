"use strict";function closeOnEsc(e){27===e.keyCode&&modal.close()}window.modal={errorColor:"#e53935",infoColor:"#2196F3",loadColor:"#4CAF50",warningColor:"#ffa726",info:function(e){modal.head.style.background=modal.infoColor,modal.head.innerText="Информация",modal.content.innerHTML=e,modal.show()},error:function(e){modal.head.style.background=modal.errorColor,modal.head.innerText="Ошибка",modal.content.innerHTML=e,modal.show()},load:function(e){modal.head.style.background=modal.loadColor,modal.head.innerText="Загрузка",modal.content.innerHTML='<div style="text-align: center;margin-bottom: 10px;">'+e+'</div><div class="progress blue lighten-3" style="margin: 0;"><div class="indeterminate green"></div></div>',modal.show()},warning:function(e){modal.head.style.background=modal.warningColor,modal.head.innerText="Предупреждение",modal.content.innerHTML=e,modal.show()},close:function(){modal.m.style.display="none",document.removeEventListener("keyup",closeOnEsc),modal.actions.innerHTML="",modal.content.innerHTML="",modal.actions.appendChild(modal.acceptBtn)},show:function(){modal.m.style.display="flex",document.addEventListener("keyup",closeOnEsc)},feedback:function(e,n,o,t){let a=document.createElement("div"),d=document.createElement("div");d.classList.add("feedback"),d.innerHTML='<textarea></textarea><div class="counter">Осталось символов: <span>500</span></div>',modal.content.appendChild(d);let l=d.querySelector("textarea"),c=d.querySelector(".counter span");l.addEventListener("input",function(){l.value.length>=500&&(l.value=l.value.substring(0,500)),c.innerText=500-l.value.length}),a.classList.add("action-btn","accept"),a.innerText="Отправить",a.addEventListener("click",function(){xhr.request({path:o,method:"POST",headers:{"Content-Type":"application/json"},content:JSON.stringify({text:l.value.substring(0,1e3),id:t||0})},function(){}),modal.close()}),modal.customActions(a),modal.head.style.background=n,modal.head.innerText=e,modal.show()},customActions:function(){modal.actions.innerHTML="";for(let e=0;e<arguments.length;e++)modal.actions.appendChild(arguments[e])},createDefaultButton:function(e,n){let o=document.createElement("div");return o.classList.add("action-btn"),o.innerText=e,o.style.background=n,o.addEventListener("click",modal.close),o}},document.addEventListener("DOMContentLoaded",function(){modal.m=document.createElement("div"),modal.m.setAttribute("id","modal-wrapper"),modal.m.style.display="none",modal.m.innerHTML='        <div class="modal-window">            <div class="modal-head"></div>            <div class="modal-content"></div>            <div class="actions">                <div class="action-btn accept">Ok</div>            </div>        </div>',document.body.appendChild(modal.m),modal.head=modal.m.querySelector(".modal-head"),modal.content=modal.m.querySelector(".modal-content"),modal.actions=modal.m.querySelector(".actions"),modal.m.addEventListener("click",function(e){modal.close()}),modal.m.querySelector(".modal-window").addEventListener("click",function(e){e.stopPropagation()}),modal.actions.querySelector(".accept").addEventListener("click",function(){modal.close()}),modal.acceptBtn=modal.actions.querySelector(".accept"),modal.acceptBtn.innerHTML="Ок",modal.acceptBtn.addEventListener("click",function(){modal.close()})});