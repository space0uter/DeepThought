"use strict";window.appConf={fileServerLocation:document.getElementById("fileServerLocation").getAttribute("content"),csrfHeader:document.getElementById("_csrf_header").getAttribute("content"),csrfToken:document.getElementById("_csrf").getAttribute("content"),user_id:document.getElementById("user_id").getAttribute("content")};const tagsCache={},tagPopup=document.createElement("div"),chips=document.querySelectorAll(".chip"),main=document.getElementById("main")||document.querySelector(".main");let timer=null;function initChips(){if(null!==main){tagPopup.setAttribute("id","tag-popup"),tagPopup.style.display="none",tagPopup.addEventListener("click",function(){tagPopup.style.display="block"}),document.addEventListener("click",function(){tagPopup.style.display="none"},!0),main.appendChild(tagPopup);for(let e=0;e<chips.length;e++){let t=chips[e];t.addEventListener("mouseenter",function(e){clearInterval(timer);let t=e.currentTarget,n=t.getAttribute("href"),i=n.substring(n.lastIndexOf("/")+1,n.length);timer=void 0===tagsCache[i]?setTimeout(loadTag,500,i,t):setTimeout(showTag,500,tagsCache[i],t)}),t.addEventListener("mouseout",function(){tagPopup.style.display="none",tagPopup.style.opacity="0"})}}}function loadTag(e,t){let n=new XMLHttpRequest;n.onreadystatechange=function(){if(4!==n.readyState)return;if(200!==n.status)return;let i=JSON.parse(n.responseText);tagsCache[e]=i,showTag(i,t)},n.open("GET","/services/tags/"+e,!0),n.setRequestHeader(appConf.csrfHeader,appConf.csrfToken),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send()}function showTag(e,t){tagPopup.innerHTML="<div class='card-content'>                <div class='describe'>"+e.description+"                </div>                <div class='nums'>                    <div class='num-element'>                        <div class='header'>Статьи</div><div class='num'>"+e.articles+"</div>                    </div>                    <div class='num-element'>                        <div class='header'>Вопросы</div><div class='num'>"+e.questions+"</div>                    </div>                    <div class='num-element'>                        <div class='header'>Задачи</div><div class='num'>"+e.problems+"</div>                    </div>                </div>            </div>",tagPopup.style.border="2px solid "+e.color;let n=getCoords(t);tagPopup.style.left=n.left-t.clientWidth/2-tagPopup.clientWidth/2+"px",tagPopup.style.top=n.top+t.clientHeight+5+"px",tagPopup.style.display="block";let i=0;setInterval(function(){(i+=.05)<=1.04?tagPopup.style.opacity=i:clearInterval(this)},1e3/60)}window.getCoords=function(e){let t=e.getBoundingClientRect(),n=document.body,i=document.documentElement,o=window.pageYOffset||i.scrollTop||n.scrollTop,s=window.pageXOffset||i.scrollLeft||n.scrollLeft,l=i.clientTop||n.clientTop||0,c=i.clientLeft||n.clientLeft||0;return{top:t.top+o-l,left:t.left+s-c}},window.get_parameters=function(){return window.location.search.replace("?","").split("&").reduce(function(e,t){let n=t.split("=");return""===n[0]?e:(e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]),e)},{})},window.change_get=function(e,t){let n,i=location.search,o=i.substring(0,i.lastIndexOf(e)+e.length+1),s=i.substring(i.lastIndexOf(e)+e.length+1,i.length);n=-1!==s.indexOf("&")?t+s.substring(s.indexOf("&"),s.length):t,location.search=o+n},window.delete_get=function(e){let t=get_parameters(),n="?";for(let i in t)i!==e&&(n+=i+"="+t[i]+"&");n=n.substring(0,n.length-1),location.search=n},window.construct_get=function(e){let t="?",n=Object.keys(e);for(let i=0;i<n.length;i++)t+="&"+n[i]+"="+e[n[i]];return t},initChips();