"use strict";let updating=!1;function initRestore(){const e=document.getElementById("token").getAttribute("content"),t=document.getElementById("password"),o=document.getElementById("confirmPassword");document.querySelector(".restore .action").addEventListener("click",function(){updating||(t.value.length<8||t.value.length>64||!t.value.match(/^[A-z|А-я|0-9|_]+$/)?modal.error("Неверный формат пароля"):o.value===t.value?(updating=!0,modal.load("Идёт обновление пароля"),xhr.request({path:"/services/restore/update",method:"POST",headers:{"Content-Type":"application/json"},content:JSON.stringify({password:t.value,confirmPassword:o.value,token:e})},function(e,t){if(e){let e=document.createElement("a");e.href="/login",e.classList.add("auth","blue"),e.innerText="Войти",modal.customActions(e),modal.head.color=modal.infoColor,modal.head.innerText="Информация",modal.content.innerHTML="Ваш пароль был успешно обновлен, авторизуйтесь на сайте.",modal.show()}else t&&modal.error("Не удалось обновить пароль, попробуйте позже")}),updating=!1):modal.error("Пароли не совпадают"))})}initRestore();